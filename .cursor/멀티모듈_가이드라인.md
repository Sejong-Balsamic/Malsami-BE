# ì„¸ì¢…ë§ì‹¸ë¯¸ ë©€í‹°ëª¨ë“ˆ ê°€ì´ë“œë¼ì¸

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° ê°œìš”

ì„¸ì¢…ë§ì‹¸ë¯¸ ë°±ì—”ë“œëŠ” **ë„ë©”ì¸ ì¤‘ì‹¬ì˜ ë©€í‹°ëª¨ë“ˆ ì•„í‚¤í…ì²˜**ë¥¼ ì±„íƒí•˜ì—¬ ê° ë„ë©”ì¸ë³„ë¡œ ë…ë¦½ì ì¸ ëª¨ë“ˆì„ êµ¬ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.

```
sejong-malsami-backend/
â”œâ”€â”€ SM-Common/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸ (ì—”í‹°í‹°, ìœ í‹¸ë¦¬í‹°, ìƒìˆ˜)
â”œâ”€â”€ SM-Domain-Member/   # íšŒì› ë„ë©”ì¸
â”œâ”€â”€ SM-Domain-Post/     # ê²Œì‹œê¸€ ë„ë©”ì¸
â”œâ”€â”€ SM-Domain-Notice/   # ê³µì§€ì‚¬í•­ ë„ë©”ì¸
â”œâ”€â”€ SM-Domain-Auth/     # ì¸ì¦ ë„ë©”ì¸
â”œâ”€â”€ SM-Domain-Academic/ # í•™ì‚¬ ì •ë³´ ë„ë©”ì¸
â”œâ”€â”€ SM-Domain-AI/       # AI/ML ë„ë©”ì¸
â”œâ”€â”€ SM-Application/     # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¡°í•© ê³„ì¸µ
â”œâ”€â”€ SM-Web/            # ì›¹ ê³„ì¸µ (ì»¨íŠ¸ë¡¤ëŸ¬, ì„¤ì •)
â””â”€â”€ settings.gradle    # ëª¨ë“ˆ ì„¤ì •
```

## ğŸ—ï¸ ëª¨ë“ˆë³„ ì—­í• ê³¼ êµ¬ì¡°

### SM-Common ëª¨ë“ˆ
**ì—­í• **: ëª¨ë“  ëª¨ë“ˆì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì œê³µ
```
SM-Common/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/
â”‚   â”œâ”€â”€ constants/         # ê³µí†µ ìƒìˆ˜ (Role, ContentType, ExpAction ë“±)
â”‚   â”œâ”€â”€ dto/              # ê³µí†µ DTO (MemberYeopjeon ë“±)
â”‚   â”œâ”€â”€ object/           # ê³µí†µ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ postgres/     # PostgreSQL ì—”í‹°í‹° (BaseEntity, Member, Yeopjeon ë“±)
â”‚   â”‚   â””â”€â”€ mongo/        # MongoDB ì—”í‹°í‹° (BaseDocument ë“±)
â”‚   â”œâ”€â”€ repository/       # ê³µí†µ ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ postgres/     # PostgreSQL ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â””â”€â”€ mongo/        # MongoDB ë¦¬í¬ì§€í† ë¦¬
â”‚   â”œâ”€â”€ service/          # ê³µí†µ ì„œë¹„ìŠ¤ (YeopjeonService, ExpService ë“±)
â”‚   â””â”€â”€ util/            # ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
â”‚       â”œâ”€â”€ properties/   # Properties í´ë˜ìŠ¤ë“¤
â”‚       â”œâ”€â”€ storage/      # íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ê´€ë ¨
â”‚       â”œâ”€â”€ config/       # ì„¤ì • í´ë˜ìŠ¤ë“¤
â”‚       â”œâ”€â”€ exception/    # ì˜ˆì™¸ ì²˜ë¦¬
â”‚       â”œâ”€â”€ filter/       # í•„í„°
â”‚       â”œâ”€â”€ init/         # ì´ˆê¸°í™” ë¡œì§
â”‚       â”œâ”€â”€ log/         # ë¡œê¹… ê´€ë ¨
â”‚       â””â”€â”€ converter/    # ì»¨ë²„í„°
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: java-library, ëª¨ë“  Spring Boot ìŠ¤íƒ€í„°ë“¤ì„ apië¡œ ë…¸ì¶œ
```

**ì£¼ìš” íŠ¹ì§•**:
- `@ConfigurationProperties`ë¥¼ ì‚¬ìš©í•œ Properties í´ë˜ìŠ¤ë“¤ (ExpProperties, YeopjeonProperties ë“±)
- ëª¨ë“  ê¸°ë³¸ ì—”í‹°í‹°ì™€ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì œê³µ
- ë‹¤ë¥¸ ëª¨ë“  ëª¨ë“ˆì˜ ê¸°ë°˜ì´ ë˜ëŠ” ëª¨ë“ˆ

### SM-Domain-* ëª¨ë“ˆë“¤
**ì—­í• **: ê° ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ ë‹´ë‹¹

#### SM-Domain-Member (íšŒì› ë„ë©”ì¸)
```
SM-Domain-Member/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/member/
â”‚   â”œâ”€â”€ dto/              # íšŒì› ê´€ë ¨ DTO, Command
â”‚   â”œâ”€â”€ service/          # íšŒì› ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ object/           # íšŒì› ë„ë©”ì¸ íŠ¹í™” ì—”í‹°í‹° (ìˆë‹¤ë©´)
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common
```

#### SM-Domain-Post (ê²Œì‹œê¸€ ë„ë©”ì¸)
```
SM-Domain-Post/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/post/
â”‚   â”œâ”€â”€ dto/              # ê²Œì‹œê¸€ ê´€ë ¨ DTO
â”‚   â”œâ”€â”€ service/          # ê²Œì‹œê¸€ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ object/           # ê²Œì‹œê¸€ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ postgres/     # QuestionPost, DocumentPost, AnswerPost ë“±
â”‚   â”‚   â””â”€â”€ mongo/        # PostEmbedding, CustomTag ë“±
â”‚   â”œâ”€â”€ repository/       # ê²Œì‹œê¸€ ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ postgres/     # JPA ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â””â”€â”€ mongo/        # MongoDB ë¦¬í¬ì§€í† ë¦¬
â”‚   â””â”€â”€ util/            # ê²Œì‹œê¸€ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° (ScoreCalculator ë“±)
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common, SM-Domain-AI (PostEmbeddingServiceìš©)
```

#### SM-Domain-Notice (ê³µì§€ì‚¬í•­ ë„ë©”ì¸)
```
SM-Domain-Notice/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/notice/
â”‚   â”œâ”€â”€ dto/              # ê³µì§€ì‚¬í•­ DTO
â”‚   â”œâ”€â”€ service/          # ê³µì§€ì‚¬í•­ ì„œë¹„ìŠ¤ (NoticeMediaFileService í¬í•¨)
â”‚   â”œâ”€â”€ object/postgres/  # NoticePost ì—”í‹°í‹°
â”‚   â””â”€â”€ repository/postgres/ # ê³µì§€ì‚¬í•­ ë¦¬í¬ì§€í† ë¦¬
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common
```

#### SM-Domain-Auth (ì¸ì¦ ë„ë©”ì¸)
```
SM-Domain-Auth/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/auth/
â”‚   â”œâ”€â”€ dto/              # AuthDto, AuthCommand, CustomUserDetails ë“±
â”‚   â”œâ”€â”€ service/          # SejongPortalAuthenticator
â”‚   â”œâ”€â”€ object/mongo/     # RefreshToken, FcmToken ë“±
â”‚   â”œâ”€â”€ repository/mongo/ # ì¸ì¦ ê´€ë ¨ MongoDB ë¦¬í¬ì§€í† ë¦¬
â”‚   â””â”€â”€ filter/          # TokenAuthenticationFilter (ì˜µì…˜)
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common
```

#### SM-Domain-Academic (í•™ì‚¬ ì •ë³´ ë„ë©”ì¸)
```
SM-Domain-Academic/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/academic/
â”‚   â”œâ”€â”€ service/          # SejongAcademicService
â”‚   â”œâ”€â”€ object/postgres/  # CourseFile, DepartmentFile
â”‚   â””â”€â”€ repository/postgres/ # í•™ì‚¬ ì •ë³´ ë¦¬í¬ì§€í† ë¦¬
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common
```

#### SM-Domain-AI (AI/ML ë„ë©”ì¸)
```
SM-Domain-AI/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/ai/
â”‚   â”œâ”€â”€ service/          # OpenAIEmbeddingService
â”‚   â”œâ”€â”€ object/           # AI ê´€ë ¨ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ postgres/     # PostEmbedding ë“±
â”‚   â”‚   â””â”€â”€ mongo/        # AI ê´€ë ¨ MongoDB ì—”í‹°í‹°
â”‚   â””â”€â”€ repository/       # AI ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common
```

### SM-Application ëª¨ë“ˆ
**ì—­í• **: ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì—¬ëŸ¬ ë„ë©”ì¸ì„ ì¡°í•©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ ê³„ì¸µ

```
SM-Application/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/application/
â”‚   â”œâ”€â”€ dto/              # ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ DTO (AdminDto, AdminCommand)
â”‚   â”œâ”€â”€ service/          # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ AuthApplicationService.java      # ì¸ì¦ ê´€ë ¨ ë³µí•© ë¡œì§
â”‚   â”‚   â”œâ”€â”€ AdminApiService.java            # ê´€ë¦¬ì ê¸°ëŠ¥ í†µí•©
â”‚   â”‚   â”œâ”€â”€ MemberService.java              # íšŒì› ê´€ë ¨ í†µí•© ë¡œì§
â”‚   â”‚   â””â”€â”€ TestService.java                # í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
â”‚   â”œâ”€â”€ init/             # ì´ˆê¸°í™” ê´€ë ¨ (CourseFileGenerator ë“±)
â”‚   â””â”€â”€ JwtUtil.java      # JWT ìœ í‹¸ë¦¬í‹°
â””â”€â”€ build.gradle         # ì˜ì¡´ì„±: SM-Common + ëª¨ë“  SM-Domain-* ëª¨ë“ˆ
```

**ì£¼ìš” íŠ¹ì§•**:
- ì—¬ëŸ¬ ë„ë©”ì¸ì˜ ì„œë¹„ìŠ¤ë¥¼ ì¡°í•©í•˜ëŠ” ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
- íŠ¸ëœì­ì…˜ ê²½ê³„ ê´€ë¦¬
- ë„ë©”ì¸ ê°„ ë°ì´í„° íë¦„ ì¡°ìœ¨
- **ì ˆëŒ€ ë‹¤ë¥¸ ë„ë©”ì¸ ëª¨ë“ˆì— ì˜ì¡´í•˜ë©´ ì•ˆ ë¨** (ìˆœí™˜ ì˜ì¡´ì„± ë°©ì§€)

### SM-Web ëª¨ë“ˆ
**ì—­í• **: ì›¹ ê³„ì¸µ (ì»¨íŠ¸ë¡¤ëŸ¬, ì„¤ì •, ë¦¬ì†ŒìŠ¤)

```
SM-Web/
â”œâ”€â”€ src/main/java/com/balsamic/sejongmalsami/web/
â”‚   â”œâ”€â”€ controller/       # REST ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¬¸ì„œí™”
â”‚   â”œâ”€â”€ config/          # Spring ì„¤ì • í´ë˜ìŠ¤ë“¤
â”‚   â”‚   â”œâ”€â”€ ComponentScanConfig.java    # ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java        # JPA/MongoDB ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ WebSecurityConfig.java     # ë³´ì•ˆ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ RedisConfig.java           # Redis ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ SwaggerConfig.java         # API ë¬¸ì„œ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ FtpConfig.java             # FTP ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ FirebaseConfig.java        # Firebase ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ EmbeddingConfig.java       # AI ì„ë² ë”© ì„¤ì •
â”‚   â”‚   â””â”€â”€ ê¸°íƒ€ ì„¤ì •ë“¤...
â”‚   â”œâ”€â”€ service/         # ì›¹ ì „ìš© ì„œë¹„ìŠ¤ (í•„ìš”ì‹œ)
â”‚   â””â”€â”€ SejongMalsamiBackendApplication.java # ë©”ì¸ í´ë˜ìŠ¤
â”œâ”€â”€ src/main/resources/  # ì„¤ì • íŒŒì¼ê³¼ ì •ì  ë¦¬ì†ŒìŠ¤
â”‚   â”œâ”€â”€ application.yml  # ë©”ì¸ ì„¤ì •
â”‚   â”œâ”€â”€ application-*.yml # í™˜ê²½ë³„ ì„¤ì •
â”‚   â”œâ”€â”€ *.yml           # ë„ë©”ì¸ë³„ ì„¤ì • (exp.yml, yeopjeon.yml ë“±)
â”‚   â”œâ”€â”€ static/         # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚   â”œâ”€â”€ templates/      # Thymeleaf í…œí”Œë¦¿
â”‚   â””â”€â”€ ê¸°íƒ€ ë¦¬ì†ŒìŠ¤...
â””â”€â”€ build.gradle        # ì˜ì¡´ì„±: SM-Common + ëª¨ë“  ëª¨ë“ˆ, ì‹¤í–‰ ê°€ëŠ¥í•œ JAR
```

**ì£¼ìš” íŠ¹ì§•**:
- ìœ ì¼í•œ ì‹¤í–‰ ê°€ëŠ¥í•œ ëª¨ë“ˆ (`bootJar` í™œì„±í™”)
- ëª¨ë“  ì„¤ì • íŒŒì¼ê³¼ ë¦¬ì†ŒìŠ¤ ë³´ê´€
- ì»¨íŠ¸ë¡¤ëŸ¬ì™€ API ë¬¸ì„œë§Œ í¬í•¨
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Application ë˜ëŠ” Domain ëª¨ë“ˆì— ìœ„ì„

## ğŸ”§ ì„¤ì •ê³¼ Properties ê´€ë¦¬

### Properties í´ë˜ìŠ¤ êµ¬ì¡°
Spring Bootì˜ `@ConfigurationProperties`ë¥¼ í™œìš©í•˜ì—¬ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

```java
// SM-Common/src/main/java/com/balsamic/sejongmalsami/util/properties/
@ConfigurationProperties(prefix = "exp")
@Component
public class ExpProperties {
    private int createQuestionPost;
    private int createAnswerPost;
    // ... getters/setters
}
```

### ì„¤ì • íŒŒì¼ ìœ„ì¹˜
ëª¨ë“  ì„¤ì • íŒŒì¼ì€ `SM-Web/src/main/resources/`ì— ìœ„ì¹˜:
```
SM-Web/src/main/resources/
â”œâ”€â”€ application.yml          # ë©”ì¸ ì„¤ì •
â”œâ”€â”€ application-dev.yml      # ê°œë°œ í™˜ê²½
â”œâ”€â”€ application-prod.yml     # ìš´ì˜ í™˜ê²½
â”œâ”€â”€ exp.yml                 # ê²½í—˜ì¹˜ ì„¤ì •
â”œâ”€â”€ yeopjeon.yml            # ì—½ì „ ì„¤ì •
â”œâ”€â”€ score.yml               # ì ìˆ˜ ì„¤ì •
â”œâ”€â”€ admin.yml               # ê´€ë¦¬ì ì„¤ì •
â””â”€â”€ post-tier.yml           # ê²Œì‹œê¸€ ë“±ê¸‰ ì„¤ì •
```

### Properties ì‚¬ìš© íŒ¨í„´
```java
// âŒ ì˜ëª»ëœ ë°©ë²• - Config í´ë˜ìŠ¤ ìƒì„±
@Configuration
public class ExpConfig {
    @Value("${exp.create-question-post}")
    private int createQuestionPost;
}

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• - Properties í´ë˜ìŠ¤ ì‚¬ìš©
@Component
@ConfigurationProperties(prefix = "exp")
public class ExpProperties {
    private int createQuestionPost;
    // getters/setters
}

// âœ… ì‚¬ìš©í•˜ëŠ” ìª½
@Component
@RequiredArgsConstructor
public class ExpCalculator {
    private final ExpProperties expProperties;
    
    public int calculateExp(ExpAction action) {
        return expProperties.getCreateQuestionPost();
    }
}
```

## ğŸ“¦ ì˜ì¡´ì„± ê´€ë¦¬ ì›ì¹™

### ì˜ì¡´ì„± ë°©í–¥
```
SM-Web â†’ SM-Application â†’ SM-Domain-* â†’ SM-Common
     â†˜                 â†—
       SM-Domain-*    
```

### ëª¨ë“ˆë³„ ì˜ì¡´ì„± ê·œì¹™

#### SM-Common
```gradle
plugins {
    id 'java-library'
}
dependencies {
    // ëª¨ë“  Spring Boot ìŠ¤íƒ€í„°ë¥¼ apië¡œ ë…¸ì¶œ
    api 'org.springframework.boot:spring-boot-starter-web'
    api 'org.springframework.boot:spring-boot-starter-data-jpa'
    // ... ê¸°íƒ€ ê³µí†µ ì˜ì¡´ì„±ë“¤
}
```

#### SM-Domain-* ëª¨ë“ˆ
```gradle
plugins {
    id 'java-library'
}
dependencies {
    implementation project(':SM-Common')
    // í•„ìš”ì‹œ ë‹¤ë¥¸ ë„ë©”ì¸ ëª¨ë“ˆ (ì˜ˆ: SM-Domain-Post â†’ SM-Domain-AI)
}
```

#### SM-Application
```gradle
plugins {
    id 'java-library'
}
dependencies {
    implementation project(':SM-Common')
    implementation project(':SM-Domain-Member')
    implementation project(':SM-Domain-Post')
    implementation project(':SM-Domain-Notice')
    implementation project(':SM-Domain-Auth')
    implementation project(':SM-Domain-Academic')
    implementation project(':SM-Domain-AI')
}
```

#### SM-Web
```gradle
plugins {
    id 'org.springframework.boot'
}
dependencies {
    implementation project(':SM-Common')
    implementation project(':SM-Application')
    implementation project(':SM-Domain-Member')
    implementation project(':SM-Domain-Post')
    implementation project(':SM-Domain-Notice')
    implementation project(':SM-Domain-Auth')
    implementation project(':SM-Domain-Academic')
    implementation project(':SM-Domain-AI')
}
```

### ìˆœí™˜ ì˜ì¡´ì„± ë°©ì§€ ê·œì¹™

1. **Application ëª¨ë“ˆì€ ì ˆëŒ€ Domain ëª¨ë“ˆì— ì˜ì¡´í•˜ë©´ ì•ˆ ë¨**
2. **Domain ëª¨ë“ˆ ê°„ ì˜ì¡´ì„±ì€ ìµœì†Œí™”**
3. **ê³µí†µ ë¡œì§ì€ SM-Commonìœ¼ë¡œ ì´ë™**
4. **ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ SM-Applicationì—ì„œ ì²˜ë¦¬**

## ğŸ†• ìƒˆ ëª¨ë“ˆ ì¶”ê°€ ê°€ì´ë“œ

### 1. ìƒˆ ë„ë©”ì¸ ëª¨ë“ˆ ì¶”ê°€ (ì˜ˆ: SM-Domain-Payment)

#### 1.1 ë””ë ‰í† ë¦¬ ìƒì„±
```bash
mkdir -p SM-Domain-Payment/src/main/java/com/balsamic/sejongmalsami/payment/{dto,service,object,repository}
mkdir -p SM-Domain-Payment/src/test/java/com/balsamic/sejongmalsami/payment
```

#### 1.2 build.gradle ìƒì„±
```gradle
plugins {
    id 'java-library'
    id 'org.springframework.boot'
    id 'io.spring.dependency-management'
}

dependencies {
    implementation project(':SM-Common')
    // í•„ìš”ì‹œ ë‹¤ë¥¸ ë„ë©”ì¸ ëª¨ë“ˆ ì¶”ê°€
}

// JAR íƒœìŠ¤í¬ ë¹„í™œì„±í™” (ì‹¤í–‰ ë¶ˆê°€ëŠ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬)
jar {
    enabled = true
    archiveClassifier = '' 
}

bootJar {
    enabled = false
}
```

#### 1.3 settings.gradle ìˆ˜ì •
```gradle
include 'SM-Domain-Payment'  // ì¶”ê°€
```

#### 1.4 ìƒìœ„ ëª¨ë“ˆ ì˜ì¡´ì„± ì¶”ê°€

**SM-Application/build.gradle**:
```gradle
dependencies {
    implementation project(':SM-Domain-Payment')  // ì¶”ê°€
}
```

**SM-Web/build.gradle**:
```gradle
dependencies {
    implementation project(':SM-Domain-Payment')  // ì¶”ê°€
}
```

#### 1.5 íŒ¨í‚¤ì§€ ìŠ¤ìº” ì„¤ì •

**SM-Web/src/main/java/.../web/config/ComponentScanConfig.java**:
```java
@ComponentScan(basePackages = {
    "com.balsamic.sejongmalsami.payment",  // ì¶”ê°€
    // ... ê¸°ì¡´ íŒ¨í‚¤ì§€ë“¤
})
```

**í•„ìš”ì‹œ DatabaseConfig.javaë„ ìˆ˜ì •**:
```java
@EnableJpaRepositories(basePackages = {
    "com.balsamic.sejongmalsami.payment.repository.postgres",  // ì¶”ê°€
})
@EnableMongoRepositories(basePackages = {
    "com.balsamic.sejongmalsami.payment.repository.mongo",  // ì¶”ê°€
})
@EntityScan(basePackages = {
    "com.balsamic.sejongmalsami.payment.object.postgres",  // ì¶”ê°€
    "com.balsamic.sejongmalsami.payment.object.mongo",  // ì¶”ê°€
})
```

## ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ì—”í‹°í‹° ê´€ë¦¬

### ì—”í‹°í‹° ë°°ì¹˜ ì›ì¹™

#### ê³µí†µ ì—”í‹°í‹° (SM-Common)
- `BaseEntity`, `BasePost`, `BaseDocument`
- ëª¨ë“  ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ì—”í‹°í‹°: `Member`, `Yeopjeon`, `Exp`
- ë‹¨ìˆœí•œ ê³µí†µ ì—”í‹°í‹°: `MediaFile`, `Faculty`, `Course` ë“±

#### ë„ë©”ì¸ë³„ ì—”í‹°í‹° (ê° Domain ëª¨ë“ˆ)
- í•´ë‹¹ ë„ë©”ì¸ì— íŠ¹í™”ëœ ì—”í‹°í‹°ë“¤
- ì˜ˆ: `QuestionPost`, `DocumentPost` â†’ `SM-Domain-Post`
- ì˜ˆ: `NoticePost` â†’ `SM-Domain-Notice`

### ì—”í‹°í‹° êµ¬ì¡°
```
{ëª¨ë“ˆ}/src/main/java/com/balsamic/sejongmalsami/{domain}/object/
â”œâ”€â”€ postgres/     # JPA ì—”í‹°í‹°
â””â”€â”€ mongo/        # MongoDB ì—”í‹°í‹°
```

## ğŸ” DTOì™€ Command íŒ¨í„´

### ì»¨íŠ¸ë¡¤ëŸ¬ë³„ DTO/Command ê·œì¹™
**"í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•˜ë‚˜ì˜ DTOì™€ í•˜ë‚˜ì˜ Commandë¥¼ ì‚¬ìš©í•œë‹¤"**

```java
// AuthController â†’ AuthDto, AuthCommand
// MemberController â†’ MemberDto, MemberCommand  
// AdminController â†’ AdminDto, AdminCommand
```

### DTO ë°°ì¹˜ ì›ì¹™
- **ë„ë©”ì¸ë³„ DTO**: í•´ë‹¹ Domain ëª¨ë“ˆì— ë°°ì¹˜
- **ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ DTO**: SM-Applicationì— ë°°ì¹˜ (AdminDto ë“±)
- **ì›¹ ì „ìš© DTO**: SM-Webì— ë°°ì¹˜ (í•„ìš”ì‹œ)

## ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ êµ¬ì¡°

### SM-Common/util/ êµ¬ì¡°
```
util/
â”œâ”€â”€ properties/           # @ConfigurationProperties í´ë˜ìŠ¤ë“¤
â”‚   â”œâ”€â”€ ExpProperties.java
â”‚   â”œâ”€â”€ YeopjeonProperties.java
â”‚   â””â”€â”€ ScoreProperties.java
â”œâ”€â”€ storage/             # íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ê´€ë ¨
â”‚   â”œâ”€â”€ StorageService.java
â”‚   â”œâ”€â”€ FtpStorageService.java
â”‚   â””â”€â”€ DirectStorageService.java
â”œâ”€â”€ config/              # ì„¤ì • ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ exception/           # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”œâ”€â”€ CustomException.java
â”‚   â”œâ”€â”€ ErrorCode.java
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ filter/              # ì„œë¸”ë¦¿ í•„í„°
â”œâ”€â”€ init/                # ì´ˆê¸°í™” ë¡œì§
â”œâ”€â”€ log/                 # ë¡œê¹… ê´€ë ¨
â”œâ”€â”€ converter/           # ë°ì´í„° ë³€í™˜
â”œâ”€â”€ CommonUtil.java      # ê³µí†µ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ
â”œâ”€â”€ FileUtil.java        # íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ ExpCalculator.java   # ê²½í—˜ì¹˜ ê³„ì‚°
â”œâ”€â”€ YeopjeonCalculator.java # ì—½ì „ ê³„ì‚°
â””â”€â”€ ê¸°íƒ€ ìœ í‹¸ë¦¬í‹°ë“¤...
```

### Calculator íŒ¨í„´
ì„¤ì •ê°’ì„ ì‚¬ìš©í•˜ëŠ” ê³„ì‚° ë¡œì§ì€ Propertiesë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©:

```java
@Component
@RequiredArgsConstructor
public class ExpCalculator {
    private final ExpProperties expProperties;
    
    public int calculateExp(ExpAction action) {
        return switch (action) {
            case CREATE_QUESTION_POST -> expProperties.getCreateQuestionPost();
            case CREATE_ANSWER_POST -> expProperties.getCreateAnswerPost();
            // ...
        };
    }
}
```

## ğŸ”’ ë³´ì•ˆê³¼ ì¸ì¦

### ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ìœ„ì¹˜
- **JWT ìœ í‹¸ë¦¬í‹°**: `SM-Application/JwtUtil.java`
- **ì¸ì¦ ì„œë¹„ìŠ¤**: `SM-Domain-Auth/service/SejongPortalAuthenticator.java`
- **ë³´ì•ˆ ì„¤ì •**: `SM-Web/config/WebSecurityConfig.java`
- **ì¸ì¦ í•„í„°**: `SM-Domain-Auth/filter/TokenAuthenticationFilter.java`

### ì„¤ì • ì›ì¹™
- ëª¨ë“  ë³´ì•ˆ ì„¤ì •ì€ SM-Webì—ì„œ ì¤‘ì•™ ê´€ë¦¬
- ì¸ì¦ ë¡œì§ì€ Domain-Authì—ì„œ ì²˜ë¦¬
- JWT ê´€ë ¨ ìœ í‹¸ë¦¬í‹°ëŠ” Application ë ˆë²¨ì—ì„œ ì œê³µ

## ğŸ“ ì½”ë”© ì»¨ë²¤ì…˜

### íŒ¨í‚¤ì§€ ëª…ëª… ê·œì¹™
```
com.balsamic.sejongmalsami.{domain}.{layer}.{detail}

ì˜ˆì‹œ:
- com.balsamic.sejongmalsami.post.service.QuestionPostService
- com.balsamic.sejongmalsami.auth.dto.AuthCommand
- com.balsamic.sejongmalsami.member.repository.postgres.MemberRepository
```

### í´ë˜ìŠ¤ ëª…ëª… ê·œì¹™
- **DTO**: `{Domain}Dto` (ì˜ˆ: AuthDto, MemberDto)
- **Command**: `{Domain}Command` (ì˜ˆ: AuthCommand, AdminCommand)
- **Service**: `{Entity}Service` (ì˜ˆ: QuestionPostService)
- **Repository**: `{Entity}Repository` (ì˜ˆ: MemberRepository)
- **Controller**: `{Domain}Controller` (ì˜ˆ: AuthController)

### ì„œë¹„ìŠ¤ ëª…ëª… ê·œì¹™
- **Domain Service**: ë‹¨ìˆœí•œ ë„ë©”ì¸ëª… (ì˜ˆ: `MemberService`)
- **Application Service**: ë³µì¡í•œ ë¡œì§ì€ `{Domain}ApplicationService` (ì˜ˆ: `AuthApplicationService`)
- **ì¶©ëŒ ë°©ì§€**: ê°™ì€ ì´ë¦„ì´ ì¡´ì¬í•  ê²½ìš° Application ëª¨ë“ˆì—ì„œ `{Domain}ApplicationService` ì‚¬ìš©

## ğŸ”„ ë¹Œë“œì™€ ë°°í¬

### Gradle ë©€í‹°ëª¨ë“ˆ ì„¤ì •
```gradle
// root build.gradle
subprojects {
    apply plugin: 'java'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'
    
    java {
        toolchain {
            languageVersion = JavaLanguageVersion.of(17)
        }
    }
}

// ë£¨íŠ¸ í”„ë¡œì íŠ¸ëŠ” ì‹¤í–‰ ë¶ˆê°€ëŠ¥
jar { enabled = false }
bootJar { enabled = false }
```

### ì‹¤í–‰ ê°€ëŠ¥í•œ JAR
**ì˜¤ì§ SM-Web ëª¨ë“ˆë§Œ ì‹¤í–‰ ê°€ëŠ¥í•œ JARë¡œ ë¹Œë“œë©ë‹ˆë‹¤.**

```bash
# ì „ì²´ ë¹Œë“œ
./gradlew clean build

# ì‹¤í–‰ ê°€ëŠ¥í•œ JAR ìœ„ì¹˜
SM-Web/build/libs/SM-Web-0.0.1-SNAPSHOT.jar
```

## ğŸš¨ ì£¼ì˜ì‚¬í•­ê³¼ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒë“¤
1. **Application ëª¨ë“ˆì´ Domain ëª¨ë“ˆì— ì˜ì¡´í•˜ëŠ” ê²ƒ**
2. **Domain ëª¨ë“ˆ ê°„ ìˆœí™˜ ì˜ì¡´ì„± ìƒì„±**
3. **Web ëª¨ë“ˆì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‘ì„±**
4. **Common ëª¨ë“ˆì— ë„ë©”ì¸ íŠ¹í™” ë¡œì§ ì¶”ê°€**

### ê¶Œì¥ ì‚¬í•­
1. **ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Application ëª¨ë“ˆì—ì„œ ì²˜ë¦¬**
2. **ë‹¨ìˆœí•œ CRUDëŠ” Domain ëª¨ë“ˆì—ì„œ ì²˜ë¦¬**
3. **ê³µí†µ ìœ í‹¸ë¦¬í‹°ëŠ” Common ëª¨ë“ˆì— ë°°ì¹˜**
4. **ì„¤ì •ì€ Properties í´ë˜ìŠ¤ë¡œ ê´€ë¦¬**
5. **ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë‹¨ìˆœí•˜ê²Œ ìœ ì§€í•˜ê³  Application ì„œë¹„ìŠ¤ì— ìœ„ì„**

### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
1. **api vs implementation ì˜ì¡´ì„±ì„ ì ì ˆíˆ ì‚¬ìš©**
2. **ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì „ì´ ë°©ì§€**
3. **ëª¨ë“ˆ ê°„ ì¸í„°í˜ì´ìŠ¤ ìµœì†Œí™”**

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### í…ŒìŠ¤íŠ¸ ëª¨ë“ˆë³„ ì „ëµ
- **Unit Test**: ê° ëª¨ë“ˆì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰
- **Integration Test**: SM-Webì—ì„œ ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸
- **MockBean**: ë‹¤ë¥¸ ëª¨ë“ˆì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ëª¨í‚¹í•˜ì—¬ í…ŒìŠ¤íŠ¸

ì´ ê°€ì´ë“œë¼ì¸ì„ ë”°ë¼ ê°œë°œí•˜ë©´ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ë©€í‹°ëª¨ë“ˆ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
